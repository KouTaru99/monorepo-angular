<label [for]="selectId" *ngIf="label" [class.required]="isRequired" >
  {{ label }}
</label>
<mat-form-field appearance="outline" style="width: 499px;">
  <mat-select
  [id]="selectId"
  [formControl]="control!"
  [multiple]="multiple"
  [compareWith]="compareWith"
  >
      <input type="text" class="trigger-input" (input)="onInputChange($event)" />
      <mat-select-trigger>
      <div #triggerContainer class="trigger-container">
        @if (multiple) {
          @if (shouldShowCollapsed && control?.value?.length > 1) {
            <span>{{getFirstSelectedItem()}}</span>
            <span class="additional-selection">
              (+{{remainingItemsCount}} item<span *ngIf="remainingItemsCount > 1">s</span>)
            </span>
          } @else {
            @for (item of control?.value; track item.key) {
              <span class="selected-item">{{item.value}}</span>
            }
          }
        } @else {
          <span>{{control?.value?.value}}</span>
        }
      </div>
    </mat-select-trigger>
    @for (option of options; track option.key) {
      <mat-option [value]="option">{{option.value}}</mat-option>
    }
  </mat-select>
</mat-form-field>


