<mat-form-field>
  <mat-label>{{ label }}</mat-label>
  <mat-select
    [formControl]="toppings"
    [multiple]="multiple"
    [placeholder]="placeholder"
    [required]="required"
    [disabled]="disabled"
    (selectionChange)="onSelectedChange($event)"
    [compareWith]="compareWith">
    <mat-select-trigger>
      @if (toppings.value?.length) {
        <span>{{toppings.value[0].value}}</span>
        @if (multiple && (toppings.value?.length || 0) > 1) {
          <span class="additional-selection">
            (+{{(toppings.value?.length || 0) - 1}} {{toppings.value?.length === 2 ? 'other' : 'others'}})
          </span>
        }
      }
      <span>{{toppings.value.value}}</span>
    </mat-select-trigger>
    @for (option of options; track option.key) {
      <mat-option [value]="option">{{option.value}}</mat-option>
    }
  </mat-select>
  @if (hint) {
    <mat-hint>{{ hint }}</mat-hint>
  }
  @if (error) {
    <mat-error>{{ error }}</mat-error>
  }
</mat-form-field>
